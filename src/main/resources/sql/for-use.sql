-- PREPARED CODE FOR POSTGRESQL
DROP TABLE IF EXISTS person;
DROP TABLE IF EXISTS image;
DROP TABLE IF EXISTS product;

CREATE TABLE IF NOT EXISTS product
(
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    product_name VARCHAR(100) NOT NULL,
    description VARCHAR(100) NOT NULL,
    price DOUBLE PRECISION NOT NULL,
    amount INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS image
(
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    file_name VARCHAR(100) NOT NULL,
    size BIGINT NOT NULL,
    content_type VARCHAR(50) NOT NULL,
    is_preview_image BOOLEAN NOT NULL,
    bytes BYTEA NOT NULL,
    product_id INT REFERENCES product(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS person
(
    id           INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    person_email varchar(100) NOT NULL,
    password     varchar(50)  NOT NULL
);

SELECT * FROM product;
SELECT * FROM image;
SELECT * FROM person;